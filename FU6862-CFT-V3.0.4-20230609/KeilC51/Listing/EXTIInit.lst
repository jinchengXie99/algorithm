C51 COMPILER V9.60.7.0   EXTIINIT                                                          08/30/2023 13:47:06 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE EXTIINIT
OBJECT MODULE PLACED IN .\Output\EXTIInit.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\User\Source\Hardware\EXTIInit.c LARGE OMF2 WARNINGLEVEL(0) OPTIMIZE(9
                    -,SPEED) BROWSE INCDIR(..\User\Include;..\FU68xx_Hardware_Driver\Include) DEBUG PRINT(.\Listing\EXTIInit.lst) TABS(2) OBJ
                    -ECT(.\Output\EXTIInit.obj)

line level    source

   1          /*  -------------------------- (C) COPYRIGHT 2022 Fortiortech ShenZhen ---------------------------*/
   2          /**
   3           * @copyright (C) COPYRIGHT 2022 Fortiortech Shenzhen
   4           * @file      xxx.c
   5           * @author    Fortiortech  Appliction Team
   6           * @since     Create:2022-07-14
   7           * @date      Last modify:2022-07-14
   8           * @note      Last modify author is Leo.li
   9           * @brief      
  10           */
  11          
  12          
  13          /* Includes -------------------------------------------------------------------------------------*/
  14          #include <FU68xx_2.h>
  15          #include <Myproject.h>
  16          
  17          USER_TYPEDEF        User;
  18          
  19          /** 
  20           * @brief       å¤–éƒ¨ä¸­æ–­é…ç½®
  21           * @data        2022/08/12
  22           */
  23          void EXTI_Init(void)
  24          {
  25   1          /*EXTI Input Pin é…ç½® ---------------------------------------- */
  26   1          ClrBit(P0_OE, P00);  // config P00 as inputï¼Œé…ç½®P0.0ä¸ºç¡¬ä»¶è¿‡æµFOç«¯å£
  27   1          ClrBit(P0_PU, P00);  // 0:disable pull up, 1:enable P10 pull up
  28   1          /*  -------------------------------------------------------------------------------------------------
  29   1              å¤–éƒ¨ä¸­æ–­æ¨¡å¼é…ç½®
  30   1              00: ä¸Šå‡æ²¿äº§ç”Ÿä¸­æ–­  01: ä¸‹é™æ²¿äº§ç”Ÿä¸­æ–­  1x: ä¸Šå‡/ä¸‹é™æ²¿äº§ç”Ÿä¸­æ–­
  31   1              -------------------------------------------------------------------------------------------------*
             -/
  32   1          IF0  = 0;                               // clear P00 interrupt flag
  33   1          IT01 = 0;
  34   1          IT00 = 1;                               // 00: rising edge interruptï¼Œ01: failing edge interruptï¼Œ1x
             -: edge-change mode interrupt
  35   1          /*  -------------------------------------------------------------------------------------------------
  36   1              å¤–éƒ¨ä¸­æ–­ä¼˜å…ˆçº§é…ç½®åŠèŠ¯ç‰‡ä¸­æ–­æ€»ä½¿èƒ½
  37   1              PX01-PX00ï¼Œä¸­æ–­ä¼˜å…ˆçº§æ§åˆ¶å€¼ä»0-3ä¾æ¬¡è¡¨ç¤ºä¼˜å…ˆçº§ä»æœ€ä½åˆ°æœ€é«˜ï¼Œå…±4çº§ä¼˜åŒ–ç
             -º§æ§åˆ¶
  38   1              EX0ï¼Œå¤–éƒ¨ä¸­æ–­0ä½¿èƒ½
  39   1              EA,èŠ¯ç‰‡ä¸­æ–­æ€»ä½¿èƒ½
  40   1              å¤–éƒ¨ä¸­æ–­æ˜¯å¦æœ‰æ»¤æ³¢çš„é…ç½®ï¼Œå†³å®šäºé€‰æ‹©ç¡¬ä»¶ä¿æŠ¤è§¦å‘ä¿¡å·æºï¼Œå¤–éƒ¨ä¸­æ–­0æ
             -ˆ–è€…æ¯”è¾ƒå™¨3ä¸­æ–­ã€‚
  41   1              è‹¥é€‰æ‹©äº†æ¯”è¾ƒå™¨3ä¸­æ–­ï¼Œåˆ™å¤–éƒ¨ä¸­æ–­æ— æ³•è¿›è¡Œæ»¤æ³¢é…ç½®
  42   1              -------------------------------------------------------------------------------------------------*
             -/
  43   1          PX01 = 1;
  44   1          PX00 = 1;                               // ä¸­æ–­ä¼˜å…ˆçº§åˆ«3ï¼Œä¸­æ–­ä¼˜å…ˆçº§æœ€é«˜,
  45   1          EX0 = 1;                                // ä½¿èƒ½å¤–éƒ¨ä¸­æ–­0, POOä½å¤–éƒ¨ä¸­æ–­è¾“å…¥ç¡¬ä»¶
  46   1          EA = 1;                                 // ä½¿èƒ½å…¨å±€ä¸­æ–­
  47   1      }
  48          
C51 COMPILER V9.60.7.0   EXTIINIT                                                          08/30/2023 13:47:06 PAGE 2   

  49          /** 
  50           * @brief       ç¡çœ æ¨¡å¼åˆå§‹åŒ–
  51           * @data        2022/08/12
  52           */ 
  53          void Sleepmode_Init(void)
  54          {
  55   1          ClrBit(P1_OE, P11);  // config P11 as input
  56   1          ClrBit(P1_PU, P11);  // diasable P11 Pull Up
  57   1          // ClrBit(P1_AN, P11);  // diasable P11 analog function
  58   1          ClrBit(P1_IF, P11);         // clear P11 interrupt flag
  59   1          ClrBit(P1_IE, P11);   // config P11 as the source of EXTI1
  60   1          IT11 = 0;
  61   1          IT10 = 1;                               // 00: posedge mode interruptï¼Œ01: negedge mode interruptï¼Œ1
             -x: edge-change mode interrupt
  62   1          PX11 = 0;
  63   1          PX10 = 0;                               // ä¸­æ–­ä¼˜å…ˆçº§åˆ«0ï¼Œä¸­æ–­ä¼˜å…ˆçº§æœ€é«˜
  64   1          EX1 = 1;                                // ä½¿èƒ½å¤–éƒ¨ä¸­æ–­1, P11ä½å¤–éƒ¨ä¸­æ–­è¾“å…¥ç¡¬ä»¶
  65   1          EA = 1;                                 // ä½¿èƒ½å…¨å±€ä¸­æ–­
  66   1      }
  67          
  68          /** 
  69           * @brief       è¿‡é›¶ç‚¹æ£€æµ‹
  70           * @data        2022/08/12
  71           */ 
  72          void ZeroCrossing_Init(void)
  73          {
  74   1          ClrBit(P2_OE, P21);  // config P20 as input
  75   1          ClrBit(P2_PU, P21);  // diasable P20 Pull Up
  76   1          ClrBit(P2_AN, P21);  // diasable P20 analog function
  77   1          ClrBit(P2_IF, P21);         // clear P11 interrupt flag
  78   1          SetBit(P2_IE, P21);   // config P11 as the source of EXTI1
  79   1          IT11 = 0;
  80   1          IT10 = 1;                               // 00: posedge mode interruptï¼Œ01: negedge mode interruptï¼Œ1
             -x: edge-change mode interrupt
  81   1          PX11 = 0;
  82   1          PX10 = 0;                               // ä¸­æ–­ä¼˜å…ˆçº§åˆ«0ï¼Œä¸­æ–­ä¼˜å…ˆçº§æœ€é«˜
  83   1          EX1 = 1;                                // ä½¿èƒ½å¤–éƒ¨ä¸­æ–­1, P20ä½å¤–éƒ¨ä¸­æ–­è¾“å…¥ç¡¬ä»¶
  84   1          EA = 1;                                 // ä½¿èƒ½å…¨å±€ä¸­æ–­
  85   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     85    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =     13    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
